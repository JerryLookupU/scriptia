# PRD — Scriptia（短篇脚本文案工具）

## 1. 项目概述
Scriptia 是面向“营销/运营文案团队”为主、“自媒体短视频创作者”为辅的短篇脚本文案生产工具。产品以“卡片化知识库”为核心，支持快速积累与复用文案素材，并通过 AI 知识卡片生成脚本/剧本。整体交互为“抽屉 + 卡片拖拽 + 全局对话框”，实现所见即所得的素材组织与脚本产出。

## 2. 产品目标
- 将创意到脚本的周期显著缩短，且结果可复用
- 建立高质量、可审计的卡片知识库
- 让用户通过“对话操作卡片”，完成高频创作流程

## 3. 设计原则（核心洞见）
- 一切皆卡片：素材、指令、结果、引用、版本皆以卡片承载
- 扁平优先：减少层级跳转，核心能力同屏完成
- 抽屉即工具台：仅承载临时展开与拖拽，不形成第二页面
- 所见即所得：结构与结果同屏，输出即卡片
- 对话驱动卡片：对话结果默认生成卡片并挂接来源链
- 有用优先：动效只服务关键动作（抽取/引用/删除/生成）

## 4. 信息架构与布局
- 顶部导航：登录/账户、语言切换、主题配色、用户设置
- 侧边栏：模块入口（首页、灵感、项目、AI 角色聊天室、卡片库、AI 工具箱、资料库）
- 页面结构：
  - 操控台（左）：页面能力面板
  - 工作区（中）：卡片排布、结果展示、脚本草稿
  - 对话框（右）：全局指令入口、上下文与引用

## 5. 卡片体系与规则
- 卡片分类：
  - 项目卡片：项目内创建/生成，默认可编辑
  - 全局卡片：只读素材库，不能直接编辑，仅可复制
- 复制规则：复制全局卡片会生成新的项目卡片；可编辑并可收藏为新的全局卡片
- 卡片类型：IP 角色、场景、剧情、梗指南、自定义类型
- 卡片结构：正面展示要点，背面展示字段/提示词/元信息；支持放大编辑
- 卡片引用：作为 message item 插入对话上下文，并保留来源链

## 6. 页面功能细化

### 6.1 首页
- 目标：快速进入与最近使用
- 操控台：按项目/类型/收藏筛选
- 工作区：最近项目、最近卡片、最近结果卡
- 对话框：全局输入，支持生成卡片或跳转到指定页面操作

### 6.2 灵感
- 目标：快速抽卡与组合
- 操控台：随机抽取/按类型抽取、抽取数量、洗牌、弃牌（清空或回收）
- 工作区：卡片排布区，支持拖拽组合与放大编辑
- 对话框：输入指令生成灵感结果卡；可一键转为项目卡片

### 6.3 项目
- 目标：从需求到脚本产出
- 操控台：新建/切换项目、脚本目标（平台/时长/风格）设定、结构化产出模板
- 工作区：项目卡片池、脚本草稿区、版本对比区
- 对话框：生成脚本结果卡或项目卡片；结果可直接进入草稿区
- 补充流程：
  - 新闻选题发散：对话输入新闻内容 → 生成“新闻卡片”
  - 新闻卡片内展示“选题列表”（条目列表）
  - 点击条目生成“选题卡/项目卡片”，可拖拽进入项目池或草稿区

### 6.4 AI 角色聊天室
- 目标：角色驱动的对话生成
- 操控台：选择角色卡、调度模式（手动/自动）
- 工作区：角色区（卡片拖拽绑定）、对话区
- 对话框：输入指令控制角色发言或生成对话
- 规则：角色卡来自卡片库抽屉；自动调度由 AI 控制发言顺序

### 6.5 卡片库
- 目标：管理全局卡片与类型体系
- 操控台：类型管理、字段模板、提示词配置
- 工作区：全局卡片浏览（只读）、类型视图、搜索/筛选
- 对话框：输入文本生成指定类型卡片

### 6.6 AI 工具箱
- 目标：扩展媒体产出
- 操控台：图片/视频生成配置
- 工作区：结果展示卡片化
- 对话框：输入生成指令，输出结果卡

### 6.7 资料库
- 目标：素材导入与档案管理
- 操控台：导入文件、切分策略、目录设计
- 工作区：资料卡片化与归档
- 对话框：基于资料生成卡片或脚本

## 7. 关键交互
- 抽牌：从卡片池抽取卡片进入工作区
- 洗牌：卡片顺序重排
- 弃牌：从工作区移除至弃牌区或回收池
- 拖拽：卡片拖拽到工作区/对话框/角色区/脚本区
- 卡片放大编辑：正反面切换编辑字段/提示词
- 引用链：结果卡自动展示来源卡片

## 8. 权限与协作（基础）
- 全局卡片默认只读
- 项目卡片可编辑，可升级为全局卡片
- 共享以卡片为最小单元（后续可扩展）

## 9. 非功能性要求
- 性能：卡片拖拽与大列表浏览保持流畅
- 可用性：键盘快捷操作（复制/引用/插入）
- 可追溯性：卡片引用链可见

## 10. 关键指标（建议）
- 卡片复用率（项目卡 → 全局卡）
- 项目产出速度（从需求到脚本）
- 选题转化率（选题卡 → 脚本卡）

## 11. 范围边界（本期不做）
- 深度协作权限系统
- 多端离线同步
- 全量流程编排与复杂审批

## 12. 待确认问题
- 卡片字段的默认模板是否需要行业预设
- 结果卡的版本管理深度与比较方式
- 项目脚本模板的标准结构集

## 13. 交互清单（新增）
详见：`docs/INTERACTIONS.md`

## 14. 页面结构更新（新增）
- 主聊天页：中间为 Chat，对话框固定在页面最下方，聊天内容可滚动
- 右侧双区：右上会话暂存区，右下卡片库
- 移除操控台
- 输入框下方增加“随机生成卡片”按钮，点击后在对话中弹出卡片
- 历史记录：点击后弹出缩略会话列表，选择后跳转到会话
- 卡片支持生成配图：点击后弹出独立窗口生成图片，作为卡片配图
- 卡片展示四种图式：折叠样式（表格单行）/弹窗样式/输入框引用样式/对话消息样式

## 15. 全局固定模块（新增）
- 顶部导航：登录/用户设置/语言切换/主题配色
- 左侧侧边栏：模块入口（首页/灵感/项目/AI 角色聊天室/卡片库/AI 工具箱/资料库），可折叠
- 右侧双区：上方会话暂存区、下方卡片库（全局可见）
- 底部固定输入框：聊天框固定在页面最下方
